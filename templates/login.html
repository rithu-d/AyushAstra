{% extends "base.html" %}

{% block title %}Login - AyushAstra{% endblock %}

{% block content %}
<section class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full space-y-8">
        <!-- Header -->
        <div class="text-center">
            <div class="text-5xl mb-4 om-symbol">‡•ê</div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">Welcome to AyushAstra</h2>
            <p class="text-gray-600">Sign in to your account or create a new one</p>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="space-y-2">
                    {% for category, message in messages %}
                        <div class="p-4 rounded-lg {% if category == 'error' %}bg-red-100 text-red-700 border border-red-300{% elif category == 'success' %}bg-green-100 text-green-700 border border-green-300{% else %}bg-blue-100 text-blue-700 border border-blue-300{% endif %}">
                            <i class="fas {% if category == 'error' %}fa-exclamation-circle{% elif category == 'success' %}fa-check-circle{% else %}fa-info-circle{% endif %} mr-2"></i>
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- Tabs -->
        <div class="bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden">
            <div class="flex border-b border-gray-200">
                <button onclick="showSignIn()" id="signin-tab" class="flex-1 py-4 px-6 text-center font-medium text-gray-700 bg-ayurvedic-green text-white transition-colors">
                    <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                </button>
                <button onclick="showSignUp()" id="signup-tab" class="flex-1 py-4 px-6 text-center font-medium text-gray-700 hover:bg-gray-50 transition-colors">
                    <i class="fas fa-user-plus mr-2"></i>Sign Up
                </button>
            </div>

            <!-- Sign In Form -->
            <div id="signin-form" class="p-8">
                <form method="POST" action="/login" class="space-y-6">
                    <input type="hidden" name="action" value="signin">
                    
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user mr-2"></i>Username
                        </label>
                        <input
                            type="text"
                            id="username"
                            name="username"
                            required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-ayurvedic-green focus:outline-none transition-colors"
                            placeholder="Enter your username"
                        />
                    </div>

                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2"></i>Password
                        </label>
                        <input
                            type="password"
                            id="password"
                            name="password"
                            required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-ayurvedic-green focus:outline-none transition-colors"
                            placeholder="Enter your password"
                        />
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input
                                id="remember-me"
                                name="remember-me"
                                type="checkbox"
                                class="h-4 w-4 text-ayurvedic-green focus:ring-ayurvedic-green border-gray-300 rounded"
                            />
                            <label for="remember-me" class="ml-2 block text-sm text-gray-700">
                                Remember me
                            </label>
                        </div>
                    </div>

                    <button
                        type="submit"
                        class="w-full ayurvedic-green text-white py-3 rounded-lg font-medium hover:bg-ayurvedic-sage transition-colors shadow-lg hover:shadow-xl"
                    >
                        <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                    </button>
                </form>
            </div>

            <!-- Sign Up Form -->
            <div id="signup-form" class="p-8 hidden">
                <form method="POST" action="/login" class="space-y-6">
                    <input type="hidden" name="action" value="signup">
                    
                    <div>
                        <label for="signup_username" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user mr-2"></i>Username
                        </label>
                        <input
                            type="text"
                            id="signup_username"
                            name="signup_username"
                            required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-ayurvedic-green focus:outline-none transition-colors"
                            placeholder="Choose a username"
                        />
                    </div>

                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-envelope mr-2"></i>Email
                        </label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-ayurvedic-green focus:outline-none transition-colors"
                            placeholder="Enter your email"
                        />
                    </div>

                    <div>
                        <label for="signup_password" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2"></i>Password
                        </label>
                        <input
                            type="password"
                            id="signup_password"
                            name="signup_password"
                            required
                            minlength="6"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-ayurvedic-green focus:outline-none transition-colors"
                            placeholder="Create a password (min. 6 characters)"
                        />
                    </div>

                    <div>
                        <label for="confirm_password" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2"></i>Confirm Password
                        </label>
                        <input
                            type="password"
                            id="confirm_password"
                            name="confirm_password"
                            required
                            minlength="6"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-ayurvedic-green focus:outline-none transition-colors"
                            placeholder="Confirm your password"
                        />
                    </div>

                    <button
                        type="submit"
                        class="w-full ayurvedic-green text-white py-3 rounded-lg font-medium hover:bg-ayurvedic-sage transition-colors shadow-lg hover:shadow-xl"
                    >
                        <i class="fas fa-user-plus mr-2"></i>Create Account
                    </button>
                </form>
            </div>
        </div>

        <!-- Additional Info -->
        <div class="text-center">
            <p class="text-sm text-gray-600">
                By signing up, you agree to our 
                <a href="#" class="text-ayurvedic-green hover:underline">Terms of Service</a> 
                and 
                <a href="#" class="text-ayurvedic-green hover:underline">Privacy Policy</a>
            </p>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    function showSignIn() {
        document.getElementById('signin-form').classList.remove('hidden');
        document.getElementById('signup-form').classList.add('hidden');
        document.getElementById('signin-tab').classList.add('bg-ayurvedic-green', 'text-white');
        document.getElementById('signin-tab').classList.remove('hover:bg-gray-50');
        document.getElementById('signup-tab').classList.remove('bg-ayurvedic-green', 'text-white');
        document.getElementById('signup-tab').classList.add('hover:bg-gray-50');
    }

    function showSignUp() {
        document.getElementById('signup-form').classList.remove('hidden');
        document.getElementById('signin-form').classList.add('hidden');
        document.getElementById('signup-tab').classList.add('bg-ayurvedic-green', 'text-white');
        document.getElementById('signup-tab').classList.remove('hover:bg-gray-50');
        document.getElementById('signin-tab').classList.remove('bg-ayurvedic-green', 'text-white');
        document.getElementById('signin-tab').classList.add('hover:bg-gray-50');
    }

    // Check if there's a hash in URL to show signup form
    if (window.location.hash === '#signup') {
        showSignUp();
    }
</script>
{% endblock %}

